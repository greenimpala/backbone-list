<html>
<head>
	<title>Backbone-List</title>
	<link rel="stylesheet" type="text/css">
	<script data-main="../src/js/bootstrap" src="../src/js/vendor/require/require.js"></script>
    <style>
        p, h1 {
            font-family: Helvetica, Arial, sans-serif;
        }

        p {
            font-size: 12px;
        }

        h1 {
            font-size: 24px;
            padding-bottom: 8px;
        }
    </style>
</head>
<body>
<h1>Backbone-List</h1>
    <p>
        Theme:
        <select>
            <option value="explorer">Explorer</option>
            <option value="clean">Clean</option>
        </select>
    </p>
    <div id="container">
    </div>
	<script type="text/javascript">
		require([
            "list/Dispatcher",
			"list/model/List",
            "list/view/ListView"
		], function (Dispatcher, List, ListView) {
            var model = new List();
            var view = new ListView({
                model: model,
                search: true,
                animate: true
            });

            $(function () {
                $.getJSON("example-data.json", function (data) {
                    model.deserialize(data);
                    $("#container").append(view.render().el);
                });
            });

            /* Example Dispatcher usage */
            Dispatcher.on("change:visible", function (model) {
                console.log("A node has been: " + (model.get("visible") ? "expanded" : "collapsed"));
            });

            $(function () {
                $("select").change(function () {
                    $("link").attr("href", "../src/style/" + this.value + "/list.css");
                }).change();
            });
		});
	</script>
</body>
</html>